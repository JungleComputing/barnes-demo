#!/bin/sh

# Jar-files from library.
LIBCLASSPATH=""
add_to_libclasspath () {
    JARFILES=`cd "$1" && ls *.jar 2>/dev/null`
    for i in ${JARFILES} ; do
	if [ -z "$LIBCLASSPATH" ] ; then
	    LIBCLASSPATH="$1/$i"
	else
	    LIBCLASSPATH="$LIBCLASSPATH:$1/$i"
	fi
    done
}

# Add the jar files in the Ibis lib dir to the classpath.
add_to_libclasspath lib/ibis

# Set classpath and determine wether to set bootclasspath.
JAVACLASSPATH="build/:$LIBCLASSPATH:.:"

# Put value of environment variable CLASSPATH in front, if present.
if [ -z "$CLASSPATH" ] ; then
    :
else 
    JAVACLASSPATH="$CLASSPATH:$JAVACLASSPATH"
fi

# Find out which Java to run
case "X$JAVA_HOME" in
X)	JAVA_EXEC=java
	;;
*)	JAVA_EXEC="$JAVA_HOME/bin/java"
	;;
esac

# And finally, run ...
"$JAVA_EXEC" \
    ${BOOTCLASSPATH:+"$BOOTCLASSPATH"} \
    -classpath "$JAVACLASSPATH" \
    "$@"
