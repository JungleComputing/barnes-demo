#!/bin/bash

if [ -f $HOME/.bashrc ]
then
    source $HOME/.bashrc
fi

REGISTRY=$1
KEY=$2

add_to_my_classpath () {
	DIRLIBS=${1}/*.jar
	for i in ${DIRLIBS}
	do
		 # if the directory is empty, then it will return the input string
		 # this is stupid, so case for it
		 if [ "$i" != "${DIRLIBS}" ] ; then
			if [ -z "$MY_CLASSPATH" ] ; then
		MY_CLASSPATH=$i
			else
		MY_CLASSPATH="$i":$MY_CLASSPATH
			fi
		 fi
	done
}

add_to_my_classpath ibis
add_to_my_classpath barnes

ls -l

exec $JAVA_HOME/bin/java -cp $MY_CLASSPATH:. \
  -Dibis.server.address=$REGISTRY \
  -Dibis.pool.name=$KEY \
  -Dibis.ipl.impl.tcp.smartsockets=true \
  -Dibis.registry.central.ping.interval=1000 \
  -Dsatin.stealWaitTimeout=5 \
  -Dsatin.ft.connectTimeout=5 \
  -Dibis.io.buffer.size=8192 -Xms64M -Xmx128M \
   BarnesHut \
  -float -dt 0.03125 -it 500000 -eps 0.025 -theta 5 -remote-viz -min 64 -input D9 8000 32
